---
title-block-banner: true
title: "Vorlesung Marketinginstrumente"
subtitle: "Price Sensitivity Meter PSM) aka Van Westendorp's method in R"
author: 
  - name: Univ.-Prof. Dr. Marcel Lichters
    url: https://www.tu-chemnitz.de/wirtschaft/bwl2/index.html
    affiliation: Chemnitz University of Technology
    affiliation-url: https://www.tu-chemnitz.de/index.html.en
  - name: Joshua Schramm
    url: https://www.tu-chemnitz.de/wirtschaft/bwl2/index.html
    affiliation: Chemnitz University of Technology
    affiliation-url: https://www.tu-chemnitz.de/index.html.en
date: today
date-format: full
citation:
  language: "en"
  type: post
  url: https://rpubs.com/M_Lichters/DEA
format:
  html:
    toc: true
    toc-location: left
    code-fold: false
    code-link: true
    code-summary: "Show the code"
    code-tools: true
    code-copy: hover
    number-sections: true
    number-depth: 3
    citations-hover: true
    footnotes-hover: true
email-obfuscation: javascript
editor: source
bibliography: Citavi_Export2.bib
---


Diese Übung soll Ihnen die Möglichkeit bieten, sich etwas genauer mit *[R](https://cran.r-project.org/)* und *[RStudio](https://posit.co/products/open-source/rstudio/)* zu beschäftigen. Dies sind skills, die Ihnen im Verlauf des weiteren Studiums sehr helfen werden. Es existieren mittlerweile sehr viele Tutorials im Internet hierzu.

::: callout-note
*R* ist eine kontext-sensitive Sprache, das bedeutet, dass *data* anders interpretiert wird als *Data*. Es kommt also auf die Groß- und Kleinschreibung an.
:::

## Vorbereitung

In *R* werden die meisten Funktionalitäten durch zusätzliche Pakete (sog. Packages) breitgestellt.
Die meisten dieser Pakete sind gut Dokomentiert: <https://cran.r-project.org/>

1.  Der Code unten evaluiert zunächst ob das Paket [pacman](https://cran.r-project.org/web/packages/pacman/index.html) auf Ihrem Rechner installiert ist. Wenn dies nicht der Fall ist, dann wird *R* es installieren.

2.  Alternativ könnten Sie dies auch manuell erledigen in dem Sie zunächst ausführen *install.packages("pacman")* und danach fortfahren mit *library(pacman)*.

3.  Die zweite Zeile läd dann das Paket [pacman](https://cran.r-project.org/web/packages/pacman/index.html).

4.  Die dritte Zeile nutzt die Funktion *p_load()* aus pacman um alle Pakete zu laden (und vorher zu installieren, falls notwendig), welche wir nachfolgend benutzten werden  (z.B. [pricesensitivitymeter](https://cran.r-project.org/web/packages/pricesensitivitymeter/index.html), welches uns Funktionen bereitstellt für die Durchführung einer PSM-Analyse).

```{r}



if (!"pacman" %in% rownames(installed.packages())) install.packages("pacman")

library(pacman)

pacman::p_load(haven, kableExtra, knitr, 
               labelled, tidyverse, pricesensitivitymeter)

```



::: callout-tip
Um besser verstehen zu können, welche Argumente bzw. Daten eine Funktion braucht, können Sie Ihren Cursor in den Namen der Funktion platzieren und dann *'F1'* drücken.
:::

Lassen Sie uns die Daten laden. Hierfür nutzen wir den Befehl *read.csv()*.

::: callout-important
## Daten Download

Um die Daten zu laden, klicken Sie bitte auf den Button "Click to download".

<a href="RawExport.csv" class="button-link"  download>Click to Download</a>
:::

```{r}
d <- read.csv("RawExport.csv")
names(d)
```

Wie Sie nun rechts in der *Environment* sehen können, hat der Datensatz insgesamt 5 Variablen: <br>

<ul>

<li>Die Respondent ID, also eine Identifier Variable.</li>

<li>**PSMtoocheap**: Die Variable enthält die Preise, die als **zu günstig** wahrgenommen wurden.</li>

<li>**PSMcheap**: Die Variable enthält die Preise, die als **günstig** wahrgenommen wurden.</li>

<li>**PSMexpensive**: Die Variable enthält die Preise, die als **teuer** wahrgenommen wurden.</li>

<li>**PSMtooexpensive**: Die Variable enthält die Preise, die als **zu teuer** wahrgenommen wurden.</li>

</ul>

## Analyse

Um die Analyse durchzuführen, laden wir das Package [*pricesensitivitymeter*](https://cran.r-project.org/web/packages/pricesensitivitymeter/index.html){target="_blank"}.

```{r, warning=FALSE, message=FALSE, results='hide'}
install.packages("pricesensitivitymeter", repos = "https://cran.r-project.org/")
library(pricesensitivitymeter)
```

Wir nutzen hier die Funktion *psm_analysis()*. Diese Funktion braucht in unserem Fall lediglich die 4 Variablen (zu günstig, günstig, teuer, zu teuer). Wir speichern die Ergebnisse in *psm_in_R*.

```{r}
psm_in_R <- psm_analysis(toocheap = d$PSMtoocheap, cheap = d$PSMcheap, expensive = d$PSMexpensive, tooexpensive = d$PSMtooexpensive)
```

Anschließend geben wir die Resultate mittels der *summary()* Funktion aus.

```{r}
summary(psm_in_R)
```

## Darstellung

Anschließend wollen wir das ganze nun noch grafisch darstellen. Hierfür nutzen wir das Package [*ggplot2*](https://ggplot2.tidyverse.org/){target="_blank"}.

```{r, warning=FALSE, message=FALSE, results='hide'}
install.packages("ggplot2", repos = "https://cran.r-project.org/")
library("ggplot2")
```

Wir nutzen die Funktion *psm_plot()*, um die Daten entsprechend für ein Plot auzubereiten. Anschließend rufen wir den Befehl wieder ab und nutzen *theme_minimal()* von *ggplot2*. Wie gesagt handelt es sich erstmal um die einfachste Darstellung.

```{r}
default_psm_plot <- psm_plot(psm_in_R)

default_psm_plot + theme_minimal()
```

Nun können wir zumindest noch die Axen sowie den Titel anpassen.

```{r}
default_psm_plot + theme_minimal() + ylab("Prozente") + xlab("Preis") + ggtitle("PSM in R") + theme(plot.title = element_text(hjust = 0.5))
```
